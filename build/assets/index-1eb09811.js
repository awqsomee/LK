import{ax as y,r as d,i as f,cH as C,j as e,aH as w,s as T}from"./vendor-8a1e4858.js";import{ec as r,W as Y,P as b,f as i,T as l,w as E,B as R,aM as _,b5 as k,ed as v}from"./index-5e466a61.js";const u=new Date().getFullYear();function P(){return Array.from({length:u-2006},(t,s)=>({id:s,title:(u-s).toString()}))}const n=P(),A=()=>{const o=y(),[t,s]=d.useState(n[0]),[m,x]=f([r.pageMounted,r.certificatesLoading]),[g,c,h]=f([r.presentYears,r.certificatedRequested,r.createCertificateLoading]),j=C(r.certificates,a=>a?[...a].reverse():null);return d.useEffect(()=>{m()},[]),e.jsx(Y,{data:!0,load:()=>{},error:null,children:e.jsx(b,{children:e.jsxs(i,{d:"column",gap:"2rem",p:"1rem 0 0 0",ai:"flex-start",children:[e.jsxs(i,{d:"column",gap:"0.5rem",children:[e.jsx(l,{size:3,align:"left",children:"Заказать справку в ФНС"}),e.jsxs(i,{gap:"1rem",jc:"space-between",ai:"flex-end",children:[e.jsx(E,{title:"Год",items:n,selected:t,setSelected:s,isActive:n.length>1,required:!0,width:"10rem",placeholder:"Выберите год"}),e.jsx(R,{text:"Заказать",background:"var(--reallyBlue)",textColor:"#fff",icon:e.jsx(w,{}),disabled:!t,loading:h,onClick:()=>{if(t){if(g.has(t.title)){_.evokeConfirm({message:e.jsxs(i,{d:"column",gap:"0.5rem",ai:"flex-start",children:[e.jsx(l,{align:"left",size:4,children:"Справка за выбранный год уже сформирована."}),e.jsx(p,{children:"Если вы уверены, что есть причина для формирования справки с корректировкой, например: изменились состав оплат или личные документы, тогда запрос на новую версию справки будет отправлен."}),e.jsx(p,{children:"Отправить?"})]}),onConfirm:()=>{c({year:t.title})}});return}c({year:t.title})}}})]})]}),e.jsxs(i,{d:"column",gap:"0.5rem",children:[e.jsx(l,{size:3,align:"left",children:"Справки в ФНС"}),e.jsx(k,{loading:x,innerPadding:"0.5rem",columns:[{title:"Дата справки",field:"cert_date",priority:"one"},{title:"Номер справки",field:"number",priority:"four"},{title:"Номер корректировки",field:"correction",priority:"two"},{title:"Отчетный год",field:"year",priority:"one"},{title:"Плательщик",field:"payer",priority:"four"},{title:"Подписант",field:"signatory",priority:"four"},{title:"Очная форма",field:"is_full_time",priority:"four"},{title:"Сумма справки",field:"summ",priority:"three"}],data:j,onRowClick:a=>o.push(v+"/"+a.id)})]})]})})})},p=T.p.withConfig({componentId:"sc-19e5w1d-0"})(["font-size:1rem;line-height:1.45rem;"]);export{A as default};
